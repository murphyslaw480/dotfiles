[general]
ui = ttyui
accounts = gmail, ufl, fastmail
pythonfile = ~/dotfiles/mail/offlineimap.py
fsync = false
# sync 3 accounts at once
maxsyncaccounts = 3
socktimeout = 30

[Account gmail]
localrepository = gmail-local
remoterepository = gmail-remote
status_backend = sqlite
#automatic syncing
#autorefresh = 5
#quick = 10

[Repository gmail-local]
type = Maildir
localfolders = ~/Mail/gmail
#minutes between syncs
#autorefresh = 5
# number of quick-syncs between autorefreshes
# do not update if the only changes were to IMAP flags
#quick = 10
# translate names back to gmail-compatible names
nametrans = lambda foldername:  re.sub ('^gmail', '[Gmail]',
                                re.sub ('sent', 'Sent Mail',
                                re.sub ('flagged', 'Starred',
                                re.sub ('_', ' ', foldername))))

[Repository gmail-remote]
type = Gmail
# training wheels: don't create any folders on server
# createfolders = false
remoteuser = murphyslaw480@gmail.com
remotepasseval = getpwd("gmail")
# leave a copy of deleted messages in Gmail's All Mail
realdelete = no
# Remove annoying [Gmail] tags
nametrans = lambda foldername:  re.sub ('^\[Gmail\]', 'gmail',
                                re.sub ('Sent_Mail', 'sent',
                                re.sub ('Starred', 'flagged',
                                re.sub (' ', '_', foldername))))
folderfilter = lambda foldername: foldername not in '[Gmail]/All Mail'
# Needed for OfflineIMAP 6.5.4
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
# send data to keep connection alive
#keepalive = 60
#holdconnection = yes
maxconnections = 3

[Account ufl]
localrepository = ufl-local
remoterepository = ufl-remote
status_backend = sqlite

[Repository ufl-local]
type = Maildir
localfolders = ~/Mail/ufl
nametrans = lambda folder: folder if folder == "INBOX" else ("INBOX/" + folder)

[Repository ufl-remote]
type = IMAP
remotehost = imap.ufl.edu
remoteuser = rcorrent
remotepasseval = getpwd("ufl")
folderfilter = lambda folder: not folder.startswith('INBOX/nosync')
nametrans = lambda folder: re.sub("INBOX/", '', folder)
maxconnections = 3

[Account fastmail]
localrepository = fastmail-local
remoterepository = fastmail-remote
status_backend = sqlite

[Repository fastmail-local]
type = Maildir
localfolders = ~/Mail/fastmail
nametrans = lambda folder: folder if folder == "INBOX" else \
  re.sub("__", " ", "INBOX." + folder)

[Repository fastmail-remote]
type = IMAP
remotehost = mail.messagingengine.com
remoteport = 993
remoteuser = rcore@fastmail.fm
remotepasseval = getpwd("fastmail")
ssl = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
nametrans = lambda folder: re.sub("INBOX.", '', re.sub(" ", "__", folder))
maxconnections = 3
